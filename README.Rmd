---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

![](https://avatars3.githubusercontent.com/u/515326?v=3&s=400)

# Description

`rcanvas` is a bouquet of functions to query your institution's instance of the [Canvas LMS.](https://www.canvaslms.com)

# Installation

`rcanvas` is not on CRAN, but can be installed via:

```{r eval = FALSE}
devtools::install_github("daranzolin/rcanvas")
library(rcanvas)
```

# Setup

Some prep work is required before use. You must first stash two items in your `.Renviron` file: (1) your third-party access token, available through your Canvas LMS account settings; and (2) your institution's particular domain. (e.g. `"https://<your_domain>.instructure.com/"`) Name your token `CANVAS_API_TOKEN`, and your domain `CANVAS_DOMAIN`. For help on setting up your `.Renviron` (and all things R) see Jenny Bryan's [Stat545 page.](http://stat545.com/bit003_api-key-env-var.html)

We provide two helper functions to make this process easier.

```{r eval = FALSE}
set_canvas_token("YOUR_TOKEN_HERE")
set_canvas_domain("https://canvas.yourdomain.edu")
```

# Usage

Each function returns a data frame with various information.

## Course Data

```{r eval = FALSE}
###Get all courses:
get_course_list()

get_course_list(include = c("teachers", "total_students"))

###Get course analytics data:
get_course_analytics_data(course_id = 20, type = "activity")

###Get course items:
get_course_items(course_id = 20, item = "users", include = "email")

```

***

## User Data

```{r eval = FALSE}
get_user_items(365, "details")
get_user_items(365, "missing_submissions")
```

***

## Gradebooks

This function is fickle, but special thanks to [Garth Egbert for the inspiration.](https://community.canvaslms.com/groups/canvas-developers/blog/2016/07/09/gradebook-analysis-error-checking-the-gradebook)

```{r eval = FALSE}
get_course_gradebook(20)
```

***

## Submissions

Submissions are available for both quizzes and assignments, e.g.:

```{r eval = FALSE}
get_submissions(27, "assignments", 2248)
get_submissions(27, "quizzes", 168)
```


# Future Work
* Additional functions
* More precise querying
* More tests
* Vignette

